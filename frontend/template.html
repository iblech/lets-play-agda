<!DOCTYPE html>
<html lang="en"><head>
  <title>__TITLE__ ‚Äî Let's play Agda</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="initial-scale=1">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üêî</text></svg>">

  <style>
    body {
      font-family: "Inria Sans", "Trebuchet MS", sans-serif;
      font-size: 1.3rem;
      margin-top: 0;
      display: grid;
      grid-template-areas: "main" "nav";
    }

    nav { grid-area: "nav"; }
    main { grid-area: "main"; }

    @media (min-width: 768px) { 
      body {
        grid-template-columns: 20em 1fr;
        grid-template-areas: "nav main";
      }
    }

    iframe { width: 100%; height: 30em; border: 0; display: none; }

    pre, code {
      font-family: "JuliaMono", monospace;
    }
    .Background { font-family: "Inria Sans", "Trebuchet MS", sans-serif; }
    .Markup     { display: none; }

    a { text-decoration: none; }
    footer a { background-image: linear-gradient(#eeebee
    0%, #eeebee 100%); background-repeat: repeat-x; background-position: 0
    100%; background-size: 1px 1px; }
    a:hover { background-image: linear-gradient(rgba(114, 83, 237, 0.45) 0%,
    rgba(114, 83, 237, 0.45) 100%); background-size: 1px 1px;
    background-repeat: repeat-x; background-position: 0 100%; }

    * { line-height: 1.5em; box-sizing: border-box; }

    h1 { line-height: 1.2em; }

    main, footer { padding: 0.5em; }

    .exercise:hover {
      outline: 2px solid orange;
      outline-offset: 4px;
    }

    footer, footer a { color: gray; }

    .exercise button { height: 100%; margin-left: 1em; }

    .edit {
      font-family: "Inria Sans";
      color: white;
      font-weight: bold;
      cursor: pointer;
      margin-left: 1em;
      padding: 4px;
      background-color: orange;
      border: 1px solid transparent;
      border-radius: 0.25rem;
    }

    .edit a { color: white; }
    .edit a:hover { background-image: none; }

    .edit:hover { background-color: darkorange; }

    .spinning {
      filter: blur(0.1rem);
    }

    nav { position: sticky; overflow-y: auto; top: 0; align-self: start; }

    .wide li span { color: gray; }

    .status-0 { list-style-type: "‚¨ú "; }
    .status-1 { list-style-type: "‚òëÔ∏è "; }
    .status-2 { list-style-type: "‚úÖ "; }
    nav li { list-style-type: "‚¨ú "; }

    nav li:has(> ol) > a { font-weight: bold; }

    .list-style-type-none li { list-style-type: none; }

    nav .logo { text-align: center; font-weight: bold; }
    nav .logo a { color: black; }
    nav .logo a:hover { background-image: none; }
    main .logo { display: inline-block; text-align: center; padding-left: 1em;
    padding-right: 1em; max-width: 10em; vertical-align: top; }
    .logo span { font-size: 400%; }

    @font-face {
      font-display: swap;
      font-family: "Julia Mono";
      font-style: normal;
      font-weight: 400;
      src: url("./JuliaMono-Regular.woff2") format("woff2");
    }
  </style>
</head><body>

<nav>
  <div class="logo"><a href="."><span>üêî</span><br>Let's play Agda</a></div>

  __TOC__
</nav>

<main>
__BODY__
</main>

<div></div>
<footer>
<p>Want to contribute?
<a
href="https://github.com/iblech/lets-play-agda/blob/main/__MODULENAME__.lagda.md">Visit
this file on GitHub.</a><br>
Let's play Agda was created by <a href="https://www.ingo-blechschmidt.eu/">Ingo
Blechschmidt</a> for a 2025 course at the <a
href="https://www.unipd.it/en/dm">University of Padova</a>.
Contact:
<a href="tel:+4917695110311">+49 176 95110311</a> (Signal, Telegram, SMS)</p>
</footer>

<script>
  function createIframe(block, id) {
    const iframe = document.createElement("iframe");
    iframe.onload = function () {
      let sheet = iframe.contentWindow.document.styleSheets[0];
      sheet.insertRule('.xterm-viewport { overflow-y: hidden !important; }', sheet.cssRules.length);
      new FontFace('JuliaMono', 'url(JuliaMono-Regular.woff2)').load().then(function (f) {
        iframe.contentDocument.fonts.add(f);
      });
      iframe.contentWindow.document.addEventListener('keydown', function (e) {
        if(e.altKey && e.keyCode == 13) {
          if(document.fullscreenElement) {
            document.exitFullscreen();
          } else {
            iframe.requestFullscreen();
          }
        }
      }, true);
      iframe.style.display = "block";
      block.remove();
      iframe.focus();
      iframe.scrollIntoView();
    };
    iframe.src = "/__ttyd/?arg=" + (new URL(location.href).pathname.split(".html")[0].split("/").pop()) + "&arg=" + id;
    return iframe;
  }

  function attachEditor(block) {
    block.classList.add("exercise");
    const id = block.innerText.split(/\s+/)[0];
    for(const holeMarker of block.getElementsByClassName("Hole")) {
      const editButton = document.createElement("a");
      editButton.className = "edit";
      editButton.innerHTML = "üêî Edit hole‚Ä¶";
      editButton.onclick = function () {
        block.classList.add("spinning");
        block.insertAdjacentElement("afterend", createIframe(block, id));
      };
      holeMarker.insertAdjacentElement("afterend", editButton);
    }
  }

  for(const block of document.getElementsByTagName("pre")) {
    if(block.innerHTML.indexOf("{!!}") >= 0) {
      attachEditor(block);
    }
  }
</script>

<link rel="stylesheet" href="Agda.css">

</body>
</html>
